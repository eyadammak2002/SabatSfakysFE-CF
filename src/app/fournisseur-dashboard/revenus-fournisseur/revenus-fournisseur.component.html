
<!-- revenue.component.html -->
<div class="content-wrapper" id="revenus-fournisseur-content">
  <!-- En-tête moderne et élégant -->
  <div class="dashboard-header">
    <div class="header-content">
      
      <div class="header-left">
        <div class="brand-logo">
          <i class="fas fa-chart-line"></i>
        </div>
        <div class="header-title">
          <h2>Tableau de Bord des Revenus</h2>
          <p>Suivez vos revenus et analysez vos performances</p>
          
        </div>
      </div>
      <div class="header-actions">
        <div class="action-buttons">
          <button class="btn" style="color: #fff; background: #5a4030; border-color:#fff;" (click)="exportToPdf()">
            <i class="bi bi-file-pdf me-1"></i> Télécharger PDF
          </button>
        </div>
      </div>
    </div>
    
    <!-- Mini statistiques -->
    <div class="stats-overview">
      <div class="stat-card" *ngIf="revenuData">
        <div class="stat-icon">
          <i class="fas fa-calendar-day"></i>
        </div>
        <div class="stat-info">
          <span class="stat-value">{{ formatCurrency(revenuData.revenuJourCourant) }}</span>
          <span class="stat-label">Aujourd'hui</span>
        </div>
      </div>
      
      <div class="stat-card" *ngIf="revenuData">
        <div class="stat-icon">
          <i class="fas fa-calendar-week"></i>
        </div>
        <div class="stat-info">
          <span class="stat-value">{{ formatCurrency(revenuData.revenuSemaineCourant) }}</span>
          <span class="stat-label">Cette semaine</span>
        </div>
      </div>
      
      <div class="stat-card" *ngIf="revenuData">
        <div class="stat-icon">
          <i class="fas fa-calendar-alt"></i>
        </div>
        <div class="stat-info">
          <span class="stat-value">{{ formatCurrency(revenuData.revenuMoisCourant) }}</span>
          <span class="stat-label">Ce mois</span>
        </div>
      </div>
      
      <div class="stat-card" *ngIf="revenuData">
        <div class="stat-icon">
          <span class="dt-icon">DT</span>
        </div>
        <div class="stat-info">
          <span class="stat-value">{{ formatCurrency(revenuData.revenuAnneeCourante) }}</span>
          <span class="stat-label">Cette année</span>
        </div>
      </div>
    </div>
  </div>

  <!-- Message de chargement -->
  <div *ngIf="loading" class="text-center my-4">
    <div class="spinner-border text-primary" role="status">
      <span class="visually-hidden">Chargement...</span>
    </div>
    <p class="mt-2">Chargement des données...</p>
  </div>

  <!-- Barre de recherche séparée du tableau -->
  <div class="card shadow-lg border-0 overflow-hidden mb-3">
    <div class="card-body p-0">
      <div class="search-container p-3">
        <div class="input-group">
          <span class="input-group-text"><i class="fa fa-search"></i></span>
          <input 
            type="text" 
            class="form-control" 
            placeholder="Rechercher un article..." 
            [(ngModel)]="searchTerm">
        </div>
      </div>
    </div>
  </div>

  <!-- Tableau des articles -->
  <div class="card shadow-lg border-0 overflow-hidden">
    <div class="card-body p-0">
      <div class="table-responsive">
        <table class="table table-hover custom-table mb-0">
          <thead>
            <tr style="background: linear-gradient(135deg, #3c2313 0%, #5a3823 100%);">
              <th scope="col" class="px-3 py-3 font-weight-bold">Référence</th>
              <th scope="col" class="px-3 py-3 font-weight-bold">Article</th>
              <th scope="col" class="px-3 py-3 font-weight-bold">Prix Fournisseur</th>
              <th scope="col" class="px-3 py-3 font-weight-bold">Prix Vente (+10%)</th>
              <th scope="col" class="px-3 py-3 font-weight-bold">Quantité vendue</th>
              <th scope="col" class="px-3 py-3 font-weight-bold">Revenu Brut</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let article of filteredArticles" class="align-middle">
              <td class="px-3 py-3 fw-bold">{{ article.refArticle }}</td>
              <td class="px-3 py-3 fw-bold">{{ article.nomArticle }}</td>
              <td class="px-3 py-3 fw-bold text-secondary">{{ formatCurrency(article.prixFournisseur) }}</td>
              <td class="px-3 py-3 fw-bold text-primary">{{ formatCurrency(article.prixVente) }}</td>
              <td class="px-3 py-3">{{ article.quantite }}</td>
              <td class="px-3 py-3 fw-bold text-success">{{ formatCurrency(article.revenuBrut) }}</td>
            </tr>
            <tr *ngIf="filteredArticles.length === 0">
              <td colspan="6" class="text-center p-4">
                <div class="alert" style="background-color: rgba(60, 35, 19, 0.1); border-left: 4px solid #3c2313; color: #3c2313;">
                  Aucun article trouvé
                </div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <!-- Totaux alignés à droite -->
  <div *ngIf="revenuData" class="mt-4 d-flex justify-content-end">
    <div class="stat-card" style="width: auto;">
     
      <div class="stat-info">
        <span class="stat-value">{{ formatCurrency(revenuData.revenuTotal) }}</span>
        <span class="stat-label">Revenu Total</span>
      </div>
    </div>
  </div>
</div>
