<!-- list-reclamation.component.html -->
<div class="content-wrapper">
    <!-- En-tête moderne et élégant -->
    <div class="dashboard-header">
      <div class="header-content">
        <div class="header-left">
          <div class="brand-logo">
            <i class="fas fa-exclamation-circle"></i>
          </div>
          <div class="header-title">
            <h2>Gestion des Réclamations</h2>
            <p>Gérez et traitez les réclamations clients</p>
          </div>
        </div>
        <button class="btn-refresh" (click)="loadReclamationsForFournisseur()">
          <span class="btn-icon"><i class="fas fa-sync-alt"></i></span>
          <span class="btn-text">Actualiser</span>
        </button>
      </div>
      
      <!-- Mini statistiques -->
      <div class="stats-overview">
        <div class="stat-card">
          <div class="stat-icon">
            <i class="fas fa-list"></i>
          </div>
          <div class="stat-info">
            <span class="stat-value">{{ getTotalReclamations() }}</span>
            <span class="stat-label">Total réclamations</span>
          </div>
        </div>
        <div class="stat-card">
          <div class="stat-icon">
            <i class="fas fa-exclamation-triangle"></i>
          </div>
          <div class="stat-info">
            <span class="stat-value">{{ nonResolvedReclamations.length || 0 }}</span>
            <span class="stat-label">Non résolues</span>
          </div>
        </div>
        
        <div class="stat-card">
          <div class="stat-icon">
            <i class="fas fa-check-circle"></i>
          </div>
          <div class="stat-info">
            <span class="stat-value">{{ resolvedReclamations.length || 0 }}</span>
            <span class="stat-label">Résolues</span>
          </div>
        </div>
      </div>
    </div>
  
    <!-- Onglets pour naviguer entre les listes -->
    <ul class="nav nav-tabs mb-3">
      <li class="nav-item">
        <a class="nav-link" [class.active]="activeTab === 'nonResolved'" 
           (click)="setActiveTab('nonResolved')">
          Réclamations non résolues <span class="badge bg-danger">{{nonResolvedReclamations.length}}</span>
        </a>
      </li>
      <li class="nav-item">
        <a class="nav-link" [class.active]="activeTab === 'resolved'" 
           (click)="setActiveTab('resolved')">
          Réclamations résolues <span class="badge bg-success">{{resolvedReclamations.length}}</span>
        </a>
      </li>
    </ul>
    
    <!-- Liste des réclamations non résolues -->
    <div *ngIf="activeTab === 'nonResolved'">
      <div *ngIf="nonResolvedReclamations.length === 0"     class="alert mt-3"    style="background-color: rgba(60, 35, 19, 0.1); border-left: 4px solid #3c2313; color: #3c2313;">

        Aucune réclamation non résolue pour le moment.
      </div>
      
      <div *ngIf="nonResolvedReclamations.length > 0" class="row">
        <div *ngFor="let reclamation of nonResolvedReclamations" class="col-md-6 mb-3">
          <div class="card">
            <div class="card-header d-flex justify-content-between align-items-center">
              <h5 class="mb-0">Réclamation #{{reclamation.id}}</h5>
              <span class="badge bg-warning">Non résolue</span>
            </div>
            <div class="card-body">
              <p><strong>Date:</strong> {{reclamation.dateAjout | date:'dd/MM/yyyy'}}</p>
              <p><strong>Description:</strong> {{reclamation.description}}</p>
              <p *ngIf="reclamation.client"><strong>Client:</strong> {{reclamation.client.username}}</p>
              <p *ngIf="reclamation.article"><strong>Article:</strong> {{reclamation.article.name}}</p>
              
              <!-- Afficher les photos s'il y en a -->
              <div *ngIf="reclamation.photos && reclamation.photos.length > 0" class="mt-3">
                <h6>Photos:</h6>
                <div class="d-flex flex-wrap">
                  <div *ngFor="let photo of reclamation.photos" class="me-2 mb-2">
                    <img [src]="'http://localhost:8080/api/photos/' + photo.id" 
                         alt="Photo" class="img-thumbnail" style="width: 100px; height: 100px; object-fit: cover;">
                  </div>
                </div>
              </div>
              
              <button class="btn btn-success mt-3" (click)="markAsResolved(reclamation.id!)">
                Marquer comme résolue
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Liste des réclamations résolues -->
    <div *ngIf="activeTab === 'resolved'">
      <div *ngIf="resolvedReclamations.length === 0" class="alert mt-3"         style="background-color: rgba(60, 35, 19, 0.1); border-left: 4px solid #3c2313; color: #3c2313;">

        Aucune réclamation résolue pour le moment.
      </div>
      
      <div *ngIf="resolvedReclamations.length > 0" class="row">
        <div *ngFor="let reclamation of resolvedReclamations" class="col-md-6 mb-3">
          <div class="card">
            <div class="card-header d-flex justify-content-between align-items-center">
              <h5 class="mb-0">Réclamation #{{reclamation.id}}</h5>
              <span class="badge bg-success">Résolue</span>
            </div>
            <div class="card-body">
              <p><strong>Date:</strong> {{reclamation.dateAjout | date:'dd/MM/yyyy'}}</p>
              <p><strong>Description:</strong> {{reclamation.description}}</p>
              <p *ngIf="reclamation.client"><strong>Client:</strong> {{reclamation.client.username}}</p>
              <p *ngIf="reclamation.article"><strong>Article:</strong> {{reclamation.article.name}}</p>
              
              <!-- Afficher les photos s'il y en a -->
              <div *ngIf="reclamation.photos && reclamation.photos.length > 0" class="mt-3">
                <h6>Photos:</h6>
                <div class="d-flex flex-wrap">
                  <div *ngFor="let photo of reclamation.photos" class="me-2 mb-2">
                    <img [src]="'http://localhost:8080/api/photos/' + photo.id" 
                         alt="Photo" class="img-thumbnail" style="width: 100px; height: 100px; object-fit: cover;">
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>