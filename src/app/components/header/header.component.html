<header class="header">
    <div class="header-container">
        <!-- Logo -->
        <div class="logo">
            <img src="assets/logo.png" alt="SabatSfakys Logo" class="logo-img">
        </div>

        <!-- Barre de recherche -->
        <div class="search-bar">
            <i class="fas fa-search"></i>
            <input type="text" placeholder="Rechercher...">
        </div>

        <!-- Icônes de navigation (Favoris, Panier, Profil) -->
        <div class="icon-links">
            <a routerLink="/favoris" class="icon-link"><i class="far fa-heart"></i></a>
            <a routerLink="/panier" class="icon-link"><i class="fas fa-shopping-cart"></i></a>
            
            <!-- Icône de notifications avec dropdown -->
        <!-- Dans votre header.component.html -->
<div class="notification-icon">
    <a class="icon-link" (click)="toggleNotifications($event)">
      <i class="fas fa-bell"></i>
      <span class="notification-badge" *ngIf="notifications.length > 0">{{ notifications.length }}</span>
    </a>
    <div class="dropdown-menu notification-dropdown" [ngClass]="{'show': isNotificationDropdownOpen}">
      <div *ngIf="notifications.length === 0" class="no-notifications">
        Aucune notification
      </div>
      <div *ngFor="let notif of notifications" class="notification-item">
        {{ notif }}
      </div>
      <div *ngIf="notifications.length > 0" class="clear-all">
        <a href="javascript:void(0);" (click)="clearNotifications()">Effacer tout</a>
      </div>
    </div>
  </div>
            
            <!-- Bouton de test pour notification (à supprimer en production) -->
            <button *ngIf="isLoggedIn" (click)="sendTestNotification()" class="btn btn-sm btn-primary test-btn">
                Test notif
            </button>

            <div class="dropdown">
                <!-- Icône de profil affichée seulement lorsque l'utilisateur est connecté -->
                <a routerLink="/profil" class="icon-link profile-icon updateProfileIcon">
                    <i class="fas fa-user"></i>
                </a>
                <div class="dropdown-menu" *ngIf="!isLoggedIn">
                    <a routerLink="/auth/client/login">Client</a>
                    <a routerLink="/auth/fournisseur/login">Boutique</a>
                </div>
            </div>
        </div>

        <!-- ✅ Dropdown pour Espace Fournisseur -->
        <div ngbDropdown class="dropdown">
            <a *ngIf="showFournisseurDashboard" routerLink="/fournisseur" ngbDropdownToggle class="nav-link d-flex align-items-center">
                <i class="fas fa-store store-icon"></i>
                <span class="text-bold">Espace Fournisseur</span>
            </a>

            <div ngbDropdownMenu class="dropdown-menu custom-dropdown-menu">
                <a (click)="redirectToCreateArticle()" ngbDropdownItem><i class="fas fa-plus-circle menu-icon"></i> Déposer Article</a>
                <a (click)="redirectToCreatePack()" ngbDropdownItem><i class="fas fa-plus-circle menu-icon"></i>Créer Pack</a>
                <a (click)="redirectToPack()" ngbDropdownItem>tous les Packs</a>   
                <a routerLink="/fournisseur/notifications" ngbDropdownItem><i class="fas fa-bell menu-icon"></i> Notifications</a>
                
                <!-- ✅ Profil en bas du menu -->
                <div class="dropdown-profile">
                    <span class="profile-name">{{ username }}</span><br><br>
                    <span class="profile-name">{{ email }}</span>
                </div>

                <!-- ✅ LogOut avec icône -->
                <a href="javascript:void(0);" *ngIf="isLoggedIn" (click)="logout()" class="nav-link logout-link mt-4">
                    <i class="fas fa-sign-out-alt menu-icon"></i> Déconnexion
                </a>
            </div>
        </div>

        <div ngbDropdown class="dropdown">
            <a *ngIf="showClientDashboard" routerLink="/fournisseur" ngbDropdownToggle class="nav-link">
                <i class="fas fa-store" style="padding-right:15px; padding-left: 20px;font-size: medium;color:  #ebebeb;"></i>
                <span style="font-size: 18px;color: #4c2b17;font-weight: bold;">Espace Client</span>
            </a>

            <div ngbDropdownMenu class="dropdown-menu">
                <a ngbDropdownItem>Panier</a>
                <a ngbDropdownItem>Favoris</a>
                <a (click)="redirectToArticle()" ngbDropdownItem>Articles</a>
                <a (click)="redirectToCommande()" ngbDropdownItem>Ma Commande</a>
                <a (click)="redirectToListCommande()" ngbDropdownItem><i class="fas fa-shopping-cart menu-icon"></i> Commandes</a>
                <a routerLink="/fournisseur/notifications" ngbDropdownItem>Notifications</a>
                <div class="me-3">
                    <span class="text-bold d-block">{{ username }}</span>
                    <small class="text-muted">{{ email }}</small>
                </div>
                <!-- LogOut conditionnel avec ton nouveau design -->
                <a href="javascript:void(0);" *ngIf="isLoggedIn" (click)="logout()" class="nav-link" style="font-size: medium;">
                    <i class="feather icon-log-out" style="padding-right:15px; padding-left: 20px; font-size: medium; color: #ebebeb;"></i>
                    <span style="font-size: 18px; color: #4c2b17; font-weight: bold;">LogOut</span>
                </a>
            </div>
        </div>
    </div>

    <!-- Menu de navigation (Catégories) -->
    <nav *ngIf="!showFournisseurDashboard" class="nav-links">
        <div ngbDropdown class="dropdown">
            <a routerLink="/chaussures" ngbDropdownToggle>Chaussures</a>
            <div ngbDropdownMenu class="dropdown-menu">
                <a routerLink="/chaussures/femme" ngbDropdownItem>Femme</a>
                <a routerLink="/chaussures/homme" ngbDropdownItem>Homme</a>
                <a routerLink="/chaussures/enfant" ngbDropdownItem>Enfant</a>
            </div>
        </div>
        <div ngbDropdown class="dropdown">
            <a routerLink="/sacs" ngbDropdownToggle>Sacs</a>
            <div ngbDropdownMenu class="dropdown-menu">
                <a routerLink="/sacs/femme" ngbDropdownItem>Femme</a>
                <a routerLink="/sacs/homme" ngbDropdownItem>Homme</a>
                <a routerLink="/sacs/enfant" ngbDropdownItem>Enfant</a>
            </div>
        </div>
        <div ngbDropdown class="dropdown">
            <a routerLink="/autre" ngbDropdownToggle>Autre</a>
            <div ngbDropdownMenu class="dropdown-menu">
                <a routerLink="/autre/femme" ngbDropdownItem>Femme</a>
                <a routerLink="/autre/homme" ngbDropdownItem>Homme</a>
                <a routerLink="/autre/enfant" ngbDropdownItem>Enfant</a>
            </div>
        </div>
        <div ngbDropdown class="dropdown">
            <a routerLink="/homme" ngbDropdownToggle>Homme</a>
            <div ngbDropdownMenu class="dropdown-menu">
                <a routerLink="/homme/chaussures" ngbDropdownItem>Chaussures</a>
                <a routerLink="/homme/sacs" ngbDropdownItem>Sacs</a>
                <a routerLink="/homme/autre" ngbDropdownItem>Autre</a>
            </div>
        </div>
        
        <div ngbDropdown class="dropdown">
            <a routerLink="/femme" ngbDropdownToggle>Femme</a>
            <div ngbDropdownMenu class="dropdown-menu">
                <a routerLink="/femme/chaussures" ngbDropdownItem>Chaussures</a>
                <a routerLink="/femme/sacs" ngbDropdownItem>Sacs</a>
                <a routerLink="/femme/autre" ngbDropdownItem>Autre</a>
            </div>
        </div>
        <div ngbDropdown class="dropdown">
            <a routerLink="/enfant" ngbDropdownToggle>Enfant</a>
            <div ngbDropdownMenu class="dropdown-menu">
                <a routerLink="/enfant/chaussures" ngbDropdownItem>Chaussures</a>
                <a routerLink="/enfant/sacs" ngbDropdownItem>Sacs</a>
                <a routerLink="/enfant/autre" ngbDropdownItem>Autre</a>
            </div>
        </div>

        <div class="dropdown">
            <a routerLink="/personnaliser">Personnaliser</a>
        </div>
    </nav>

    <!-- Menu de navigation (Catégories) -->
    <nav *ngIf="showFournisseurDashboard" class="nav-links">
        <div class="dropdown">
            <a (click)="redirectToArticle()" ngbDropdownItem><i class="fas fa-box menu-icon"></i> tous les Articles</a>       
            <a (click)="redirectToListCommandeParFR()" ngbDropdownItem><i class="fas fa-shopping-cart menu-icon"></i> tous les Commandes</a>
        </div>
    </nav>
</header>